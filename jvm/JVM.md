JVM

##JVM 内存模型

线程共享（堆，方法区）

线程独立（程序计数器，虚拟机栈，本地方法栈）

###堆

新生代（Edin，Survivo1，Survivo2） miron GC

老年代 major GC

Full GC

### 垃圾回收机制

* 引用计数
* 标记清除
* 标记整理
* 复制算法（young区）
* 分代算法

### 逃逸分析

逃逸分析（Escape Analysis）简单来讲就是，Java Hotspot 虚拟机可以分析新创建对象的使用范围，并决定是否在 Java 堆上分配内存的一项技术。

* 全局逃逸
* 参数逃逸
* 没有逃逸

当对象没有逃逸时，可以得到虚拟机优化

* 锁消除（线程同步锁是非常牺牲性能的，当编译器确定当前对象只有当前线程使用，那么就会移除该对象的同步锁。）
* 标量替换
* 栈上分配

### 对象内存结构

* 对象头（哈希码、分代年龄、锁标志位、偏向线程ID、偏向时间戳等信息）如果是数组，还有一块存放数组长度的数据
* 实例数据
* 对齐填充

### 对象创建方法

有几种方法

* new一个
* 反射
* 反序列化
* 克隆

### 对象创建过程

1.判断对象对应类是否加载（虚拟机遇到new指令，会在常量池定位类的符合引用，如果没有找到，说明类未加载，那么会进行类的加载，解析，初始化）

2.为对象分配内存

3.默认初始化（基本数据默认值，引用数据null）

4.初始化init

https://juejin.cn/post/6991736505077071879



 

